<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Model Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    :root{
      --red:#b00000;
      --yellow:#f7c948;
      --green:#2fbf71;
      --bg:#0e0e0f;
      --panel:#151516;
      --text:#eaeaea;
      --muted:#9aa0a6;
      --border:#262626;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:Arial,Helvetica,sans-serif}

    .header{
      height:46px; background:var(--red);
      display:flex; align-items:center; gap:14px;
      padding:0 14px; position:sticky; top:0; z-index:50;
    }
    .logo{font-weight:800; letter-spacing:.5px}
    .search{
      flex:1; display:flex; align-items:center;
      background:#fff; border-radius:18px; padding:6px 10px;
    }
    .search input{
      flex:1; border:0; outline:0; font-size:14px;
    }
    .header-actions{display:flex; align-items:center; gap:10px}
    .pill-btn{
      background:#fff; color:#000; border:0; font-weight:700;
      height:30px; padding:0 12px; border-radius:999px; cursor:pointer;
    }
    .broadcast{ background:var(--green); color:#fff; }
    .icon-btn{
      width:30px; height:30px; border-radius:50%; border:0;
      background:#fff; display:grid; place-items:center; cursor:pointer;
    }
    .avatar{
      width:30px; height:30px; border-radius:50%; overflow:hidden; cursor:pointer;
      border:2px solid #fff;
    }
    .avatar img{width:100%; height:100%; object-fit:cover}

    .dropdown{
      position:absolute; right:14px; top:52px;
      background:#202124; border:1px solid var(--border);
      border-radius:12px; width:220px; padding:8px; display:none;
      box-shadow:0 8px 24px rgba(0,0,0,.35);
    }
    .dropdown.open{display:block}
    .drop-item{
      display:flex; align-items:center; gap:10px;
      padding:10px; border-radius:8px; cursor:pointer; color:#e9eaee;
    }
    .drop-item:hover{background:#2a2b2e}
    .drop-item svg{width:18px; height:18px}

    .info{
      background:var(--yellow); color:#2b2b2b;
      display:flex; justify-content:space-between; align-items:center;
      gap:12px; padding:8px 14px; font-size:14px;
    }
    .info b{color:#000}
    .info .back-btn{
      background:#000; color:#fff; border:0; padding:6px 10px;
      border-radius:6px; cursor:pointer; font-weight:700; font-size:12px;
    }

    .stage{
      min-height:calc(100vh - 46px - 40px);
      background:#000; display:grid; place-items:center; padding:24px;
    }
    .stage-card{
      width:min(100%,980px); border:1px dashed #333; border-radius:14px;
      padding:40px; text-align:center; background:linear-gradient(180deg,#0b0b0b,#101012);
    }
    .stage h2{margin:0 0 8px}
    .muted{color:var(--muted); font-size:14px}
    .controls{margin-top:18px; display:flex; justify-content:center; gap:10px}
    .ctrl{
      background:#1f1f22; border:1px solid var(--border); color:#e9eaee;
      padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:700;
    }
    .ctrl.primary{background:var(--green); border-color:#1a7f4c; color:#fff}

    @media (max-width:700px){
      .logo{display:none}
      .search{display:none}
      .header{gap:8px}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">ISHVAR</div>
    <div class="search">
      <input type="text" placeholder="Search…" />
    </div>
    <div class="header-actions">
      <button id="goBroadcast" class="pill-btn broadcast">Broadcast Center</button>
      <button class="icon-btn" title="Gifts">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M20 12H4v8h16v-8Z"/><path d="M12 12V4"/>
          <path d="M2 7h20v5H2z"/>
        </svg>
      </button>
      <div id="avatar" class="avatar">
        <img src="https://i.pravatar.cc/60?img=12" alt="me"/>
      </div>
    </div>
  </header>

  <!-- Profile dropdown -->
  <div id="menu" class="dropdown">
    <div class="drop-item">My profile</div>
    <div class="drop-item">Feed</div>
    <div class="drop-item">My fan club</div>
    <div class="drop-item">Settings</div>
    <div class="drop-item" id="logoutBtn">Logout</div>
  </div>

  <!-- Yellow info bar -->
  <div class="info">
    <div>You're logged in as <b>Model_Name</b>. Apply for verification and start streaming!</div>
    <button class="back-btn" onclick="history.back()">Back to My Models</button>
  </div>

  <!-- Stage -->
  <main class="stage">
    <div class="stage-card">
      <h2>No live broadcast yet</h2>
      <div class="muted">Click “Broadcast Center” to start camera & microphone.</div>
      <div class="controls">
        <button id="startLive" class="ctrl primary">Start Live</button>
        <button id="stopLive" class="ctrl" style="display:none">Stop Live</button>
      </div>
      <video id="preview" autoplay muted playsinline style="margin-top:14px; width:100%; max-width:720px; border-radius:12px; display:none;"></video>
    </div>
  </main>

  <script>
    // --- Redirect if not logged in ---
    if(!localStorage.getItem("token")){
      window.location.href = "index.html";
    }

    // Profile menu toggle
    const avatar = document.getElementById('avatar');
    const menu = document.getElementById('menu');
    avatar.addEventListener('click', () => {
      menu.classList.toggle('open');
    });
    document.addEventListener('click', (e)=>{
      if(!menu.contains(e.target) && !avatar.contains(e.target)){ menu.classList.remove('open'); }
    });

    // Broadcast buttons
    const goBroadcast = document.getElementById('goBroadcast');
    const startLive = document.getElementById('startLive');
    const stopLive = document.getElementById('stopLive');
    const videoEl = document.getElementById('preview');
    let stream;

    goBroadcast.addEventListener('click', ()=> {
      window.scrollTo({top: document.body.scrollHeight/3, behavior:'smooth'});
    });

    startLive.addEventListener('click', async ()=>{
      try{
        stream = await navigator.mediaDevices.getUserMedia({ video:true, audio:true });
        videoEl.srcObject = stream;
        videoEl.style.display = 'block';
        startLive.style.display = 'none';
        stopLive.style.display = 'inline-block';
      }catch(err){
        alert('Camera/Mic access denied: ' + err.message);
      }
    });
    stopLive.addEventListener('click', ()=>{
      if(stream){ stream.getTracks().forEach(t=>t.stop()); }
      videoEl.srcObject = null;
      videoEl.style.display = 'none';
      stopLive.style.display = 'none';
      startLive.style.display = 'inline-block';
    });

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', ()=>{
      localStorage.removeItem('token');
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>
